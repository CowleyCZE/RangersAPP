.PHONY: help setup install dev backend frontend test clean docker docker-up docker-down lint format

help:
	@echo "GDForge AI - Make Commands"
	@echo "=========================="
	@echo ""
	@echo "Setup & Installation:"
	@echo "  make setup          - Inicializuje projekt (backend + frontend)"
	@echo "  make install        - Nainstaluje vÅ¡echny dependencies"
	@echo ""
	@echo "Development:"
	@echo "  make dev            - SpustÃ­ backend + frontend (require 2 terminÃ¡ly)"
	@echo "  make backend        - SpustÃ­ pouze backend"
	@echo "  make frontend       - SpustÃ­ pouze frontend"
	@echo ""
	@echo "Testing & Quality:"
	@echo "  make test           - SpustÃ­ testy"
	@echo "  make lint           - SpustÃ­ linter"
	@echo "  make format         - FormÃ¡tuje kÃ³d"
	@echo ""
	@echo "Docker:"
	@echo "  make docker         - Builduje Docker images"
	@echo "  make docker-up      - SpustÃ­ kontejnery"
	@echo "  make docker-down    - ZastavÃ­ kontejnery"
	@echo "  make docker-clean   - OdstranÃ­ images a kontejnery"
	@echo ""
	@echo "Maintenance:"
	@echo "  make clean          - VyÄistÃ­ vÅ¡echny cache a build soubory"
	@echo "  make docs           - Generuje dokumentaci"

setup:
	@echo "ðŸš€ Initializing GDForge AI..."
	bash setup.sh
	@echo "âœ“ Setup complete!"

install: install-backend install-frontend
	@echo "âœ“ All dependencies installed!"

install-backend:
	@echo "ðŸ“¦ Installing backend dependencies..."
	cd backend && python -m venv venv
	cd backend && . venv/bin/activate && pip install -r requirements.txt
	@echo "âœ“ Backend dependencies installed"

install-frontend:
	@echo "ðŸ“¦ Installing frontend dependencies..."
	cd frontend && npm install
	@echo "âœ“ Frontend dependencies installed"

dev:
	@echo "ðŸŽ® Starting GDForge AI (requires 2 terminals)..."
	@echo ""
	@echo "Terminal 1: make backend"
	@echo "Terminal 2: make frontend"
	@echo ""

backend:
	@echo "âš™ï¸  Starting backend server..."
	cd backend && . venv/bin/activate && python run.py

frontend:
	@echo "ðŸŽ¨ Starting frontend dev server..."
	cd frontend && npm run dev

test:
	@echo "ðŸ§ª Running tests..."
	cd backend && . venv/bin/activate && pytest -v
	@echo "âœ“ Tests completed!"

lint:
	@echo "ðŸ” Linting code..."
	cd frontend && npm run lint
	@echo "âœ“ Linting complete!"

format:
	@echo "âœ¨ Formatting code..."
	cd frontend && npm run lint --fix 2>/dev/null || true
	@echo "âœ“ Code formatted!"

docker:
	@echo "ðŸ³ Building Docker images..."
	docker-compose build
	@echo "âœ“ Docker images built!"

docker-up:
	@echo "ðŸš€ Starting Docker containers..."
	docker-compose up

docker-down:
	@echo "ðŸ›‘ Stopping Docker containers..."
	docker-compose down

docker-clean: docker-down
	@echo "ðŸ§¹ Cleaning Docker resources..."
	docker-compose rm -f
	@echo "âœ“ Docker resources cleaned!"

clean:
	@echo "ðŸ§¹ Cleaning project..."
	find . -type d -name __pycache__ -exec rm -rf {} + 2>/dev/null || true
	find . -type d -name .pytest_cache -exec rm -rf {} + 2>/dev/null || true
	find . -type d -name node_modules -exec rm -rf {} + 2>/dev/null || true
	find . -type d -name dist -exec rm -rf {} + 2>/dev/null || true
	find . -type d -name .vite -exec rm -rf {} + 2>/dev/null || true
	find . -name "*.pyc" -delete
	find . -name ".DS_Store" -delete
	@echo "âœ“ Project cleaned!"

docs:
	@echo "ðŸ“š Generating documentation..."
	@echo "Documentation files:"
	@echo "  - README.md"
	@echo "  - docs/API.md"
	@echo "  - docs/GODOT_INTEGRATION.md"
	@echo "  - examples/EXAMPLES.md"
	@echo "  - ARCHITECTURE.md"
	@echo "  - CONTRIBUTING.md"
	@echo "  - CHANGELOG.md"
	@echo "âœ“ Documentation complete!"

.DEFAULT_GOAL := help
